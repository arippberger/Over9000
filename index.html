<!doctype html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Over9000</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  
  <div id="output"></div>

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <!-- Your custom script here -->
  <script type="text/javascript">
    //axios.defaults.headers.post['Content-Type'] = 'application/json';
    let gifURL = '';
  
    // Make a request for a user with a given ID
    axios.get('https://api.coindesk.com/v1/bpi/currentprice.json')
      .then(function (response) {
        // handle success
        console.log(response);
        
        if(response.data.bpi.USD.rate_float > 9000) {
          gifURL = 'https://i.giphy.com/tPKoWQJk3cEbC.gif';
          let payload = JSON.stringify({"text": gifURL});
          const url = 'https://hooks.slack.com/services/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';
          axios.post(url, payload);
        } else {
          gifURL = 'https://media.giphy.com/media/fnm3kPuXazD7sTZTqW/giphy.gif';
        }
      
        document.getElementById('output').innerHTML = '<img src="' + gifURL +'" alt="Bitcoin price">';
        
      })
      .catch(function (error) {
        // handle error
        console.log(error);
      });
      
  </script>
  
</body>

</html>
